function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(r,e){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,a,o=[],i=!0,s=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(o.push(n.value),!e||o.length!==e);i=!0);}catch(r){s=!0,a=r}finally{try{i||null==t.return||t.return()}finally{if(s)throw a}}return o}}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _extends(){return(_extends=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}).apply(this,arguments)}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,e){if(r){if("string"==typeof r)return _arrayLikeToArray(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,e):void 0}}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}function _arrayLikeToArray(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}define("dpz.orderHistory.message",function(){function e(r,e){var t=e.Message,n=e.MessageCategory;return a.includes(n)?[].concat(_toConsumableArray(r),[t]):r}function y(r){return r.reduce(e,[])}function t(){return jsDPZ.app.customer.getCustomer().getSessionData()}var a=["CouponSwapped","RemovedProduct","ProductSwapped","InvalidOptionPartRemoved","UpdatedToppingWeight","Informational"],n="hasSeenOrderHistoryMessage";return{getHasMessage:function(r){var e=r.OrderMessages;return!!y(e).length},getHasSeenOrderHistoryMessage:function(){return t()[n]},renderMessage:function(r){var l=r.handleChange,d=r.order.OrderMessages;return require(["dpz.template","shared.components","marketconfig/dpz.lang.general"],function(r,e,t){var n=r.getTranslateContextValue,a=e.OrderHistoryMessageModal,o=e.TranslateContext,i={onClose:function(){return l(!0)},messages:y(d),site:site},s=n(t),u=_slicedToArray(document.getElementsByClassName("js-modalContainer"),1)[0];preact.render(preact.h(o.Provider,{value:s},preact.h(o.Consumer,null,function(){return preact.h(a,_extends({modalQuid:"order-history-message-modal"},i))})),u)})},setHasSeenOrderHistoryMessage:function(r){var e=!(0<arguments.length&&void 0!==r)||r;return new Promise(function(r){t()[n]=e,site.sessionTools.save().then(r)})}}});