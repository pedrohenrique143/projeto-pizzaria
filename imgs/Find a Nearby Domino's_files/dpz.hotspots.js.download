function ownKeys(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)}return o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){_defineProperty(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}define("dpz.hotspots",["simplr","dpz.config","dpz.kiosk","dpz.easyOrder","dpz.geolocation"],function(e,t,o,r,s){if(!killConfig.isMarketEnabled("hotspots")||o.isActive)return{isActive:function(){return!1},isHotspotOrder:function(){return!1}};var n={radius:.16,hotspotDeliveryInstructionsLength:70,clearHotspot:function(){delete jsDPZ.app.order.getOrder().data.DeliveryHotspot,jsDPZ.app.order.getOrder().data.Customer.Address.Coordinates={Latitude:0,Longitude:0},jsDPZ.app.order.getOrder().data.Customer.Address.Name="",jsDPZ.app.order.getOrder().data.Customer.Address.Description="",site.sessionTools.save()},isActive:function(){return killConfig.isMarketEnabled("hotspots")&&!r.isInEasyOrderFlow()},getHotspots:function(e,t,o,r){var s=$.extend({distanceCoordinates:t},e);return o&&(s.radius=o),r&&(s.maxResults=r),jsDPZ.ajax.getHotspotsByGPSCoords(s).then(function(e){return e})},addressInHotspotsArea:function(e){return function(e,t){return t.timeout=5e3,jsDPZ.ajax.getHotspotsByAddress($.extend(!0,{address:e},t)).then(function(e){return!!e.Hotspots&&!!e.Hotspots.length})}(e,{radius:n.radius,maxResults:1})},getLocatorPermission:function(){var e=dpz.util.cookies.getItem("geolocationPermission");return"false"!==e&&e},getUserLocation:function(e){var t=s.getUserLocation(e);return $.when(t.cached).fail(function(e){jsDPZ.topic("hotspots.geolocation.error").publish({error:new Error("Unable to get the cached user location"),customData:e})}),t.cached!==t.current&&t.current.fail(function(e){jsDPZ.topic("hotspots.geolocation.error").publish({error:new Error("Unable to get the current user location"),customData:e})}),t},isHotspotOrder:function(e){var t=(0<arguments.length&&void 0!==e?e:jsDPZ.app.order.getOrder().data).DeliveryHotspot;return n.isActive()&&!(null==t||!t.Id)},setLocatorPermission:function(e){dpz.util.cookies.setItem("geolocationPermission",e)},autoLocateHotspotStore:function(r){jsDPZ.ajax.storeProfile(r).then(function(e){var t=jsDPZ.app.customer.getCustomer().getSessionData(),o={Coordinates:{Latitude:r.Latitude,Longitude:r.Longitude}};r.UseHotspotCityAndZipCode&&(o=_objectSpread(_objectSpread({},o),{},{City:r.City,Region:r.State,PostalCode:r.ZipCode})),e.Address={City:e.City,PostalCode:e.PostalCode,Region:e.Region,Street:e.Street,StreetName:e.StreetName,UnitNumber:e.UnitNumber,UnitType:e.UnitType},t.Address=_objectSpread(_objectSpread({},o),{},{Name:r.Name,Description:r.Description}),t.StoreID=e.StoreID,delete jsDPZ.app.order.getOrder().data.Customer.Address,jsDPZ.app.order.getOrder().data.Customer.Address=_objectSpread({},o),jsDPZ.app.store.setStore(e),$.extend(!0,jsDPZ.app.order.getOrder().data,{DeliveryHotspot:r},{Notifications:{}}),site.sessionTools.save().then(window.location="".concat(urlConfig.root,"/pages/order/#!/locate/?StoreID=").concat(r.StoreID,"&type=Delivery&latitude=").concat(r.Latitude,"&longitude=").concat(r.longitude,"&hotspot=true"))}).fail(function(){site.func.powerCommunicationError()})}};return n});