function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _iterableToArrayLimit(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==t.return||t.return()}finally{if(c)throw a}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,n)}return t}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(e){_defineProperty(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}define("pizzabuildermodules/dpz.pizzaBuilderDipCups",["dpz.template","marketconfig/dpz.lang.builders","shared.components","simplr","dpz.config"],function(e,o,r,t,n){function s(e){return"".concat(b,"/minis/").concat(e,".jpg")}function a(){var d=jsDPZ.app.catalog.getCatalog(),r=d.data;return f.sides.products.map(function(e){return r.Products[e]}).filter(Boolean).reduce(function(e,r){var t,n=r.Code,a=r.Description,o=r.ImageCode,i=r.Name,c=d.getProduct(n),u=c.imageSizes,p=void 0===u?{}:u,l=[(null==c?void 0:null===(t=c.getImageURL)||void 0===t?void 0:t.call(c,{baseURL:b,size:p.MINI}))||s(o),s("placeholder")];return _objectSpread(_objectSpread({},e),{},_defineProperty({},n,{imageUrls:l,productDescription:a,productName:i}))},{})}function i(){return _objectSpread({},m)}var c=e.contextFixed,u=e.getTranslateContextValue,p=r.DipCups,l=r.DipCupSummary,d=r.TranslateContext,y=t.controller,f=(0,n.getMarketProperty)("upsells").pizzaBuilderUpsells,b="".concat(c.market_assets_ctx,"/images/img/products"),m={};return{renderDipCupStep:function(e){var r=e.container,t=e.updateProductSummary;m=Object.keys(a()).reduce(function(e,r){return _objectSpread(_objectSpread({},e),{},_defineProperty({},r,0))},{}),r&&Object.keys(a()).length&&preact.render(preact.h(d.Provider,{value:u(_objectSpread({},o))},preact.h(p,{dipCupData:a(),initialState:m,maxQuantity:jsDPZ.config.app.MAX_QUANTITY,setState:function(r){return function(e){m=e,r()}}(t),trackEvent:dpz.utag.fire.link,u:jsDPZ.util.htmlUnEncode})),r)},renderDipCupSummary:function(e){var r=e.container,a=jsDPZ.app.catalog.getCatalog().data,t=i(),n=Object.entries(t).map(function(e){var r=_slicedToArray(e,2),t=r[0],n=r[1];return{productName:a.Products[t].Name,quantity:n}});r&&preact.render(preact.h(d.Provider,{value:u(_objectSpread({},o))},preact.h(l,{quantitiesByName:n})),r)},updateCart:function(){var u=jsDPZ.app.catalog.getCatalog().data,e=i();Object.entries(e).forEach(function(e){var r=_slicedToArray(e,2),t=r[0],n=r[1],a=_slicedToArray(u.Products[t].Variants,1)[0],o=jsDPZ.app.order.getOrder().data.Details.Variants.find(function(e){return e.Code===a})||{},i=o.ID,c=o.Qty;n&&y.mRouteAndExecute(i?"/order/variant/".concat(i,"/update?code=").concat(a,"&qty=").concat(c+n):"/order/variant/new?code=".concat(a,"&qty=").concat(n))}),m={}}}});