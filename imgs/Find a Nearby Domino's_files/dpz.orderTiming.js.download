function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _iterableToArrayLimit(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i=[],a=!0,u=!1;try{for(t=t.call(e);!(a=(n=t.next()).done)&&(i.push(n.value),!r||i.length!==r);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==t.return||t.return()}finally{if(u)throw o}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,n)}return t}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(e){_defineProperty(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}define("dpz.orderTiming",["dpz.config","simplr","dpz.duc"],function(i,o,e){function n(e,r){switch(e){case"Carryout":case"Pick-Up":case"Carside":return t(e,r);case"Delivery":case"Hotspot":return s(e,r);default:return!1}}function a(e){var r=i.getMarketProperty("date").format.TIME_TO_12;return dayjs(e,"HHmm").format(r)}function u(e){var r=i.getMarketProperty("date").format.SERVER_TIME_POWER;return dayjs(e,"HHmm").format(r)}function l(e){return jsDPZ.app.store.getStore().getAvailableServiceMethods({dtString:e}).includes("DriveUpCarryout")}function c(e,r){var t=1<arguments.length&&void 0!==r&&r;$(0<arguments.length&&void 0!==e?e:"").toggleClass("is-hidden",!t)}function d(e){function u(){o.controller.mRouteAndExecute(site.func.buildURL({url:"#!/order/time/view",parameters:{}}))}function l(e,r){var t=0<arguments.length&&void 0!==e?e:null,n=1<arguments.length&&void 0!==r?r:null;o.controller.mRouteAndExecute(site.func.buildURL({url:"#!/order/time/update",parameters:{date:t,time:n}}))}function c(e){var r=e.orderableDateTime,t=void 0===r?null:r,n=e.validateOrder,o=void 0!==n&&n;if(site.func.changeServiceMethod("Carryout"),f({validateOrder:o}),jsDPZ.util.empty(t))l();else{var i=_slicedToArray(null==t?void 0:t.split(" "),2),a=i[0],u=i[1];l(a,u)}}var r=e.orderableDateTime,d=void 0===r?null:r,t=e.validateOrder,s=void 0!==t&&t;require(["dpz.template","order.components","marketconfig/dpz.lang.overlays"],function(e,r,t){var n=e.getTranslateContextValue,o=e.contextFixed,i=r.TranslateContext,a=r.FutureOrderAttentionPopup;preact.render(preact.h(i.Provider,{value:n(t)},preact.h(a,{jsDPZ:jsDPZ,site:site,openFutureTime:u,changeDucToCarryout:c,contextFixed:o,orderableDateTime:d,validateOrder:s})),document.querySelector(".js-modalContainer"))})}var f=e.deleteDucCoupons,t=function(e,r){return r.carryout[e].isAvailable},s=function(e,r){return r.delivery[e].isAvailable};return{timeTo12:a,timeToHourMinuteSecond:u,checkFutureTimeAvailability:n,getAvailableServiceMethodsAtFutureDate:function(e){var r=0<arguments.length&&void 0!==e?e:{};return jsDPZ.ajax.getAvailableServiceMethodsForFutureDate(r).then(function(e){var r=e.intervals[0]||{},t=r.delivery,n=_objectSpread(_objectSpread({},r.carryout),t),o={};return Object.keys(n).map(function(e){return o[e]=n[e].isAvailable}),o}).catch(function(){return{}})},getTimeIntervalsForServiceMethodAtFutureDate:function(e){var r=0<arguments.length&&void 0!==e?e:{};return jsDPZ.ajax.getAvailableServiceMethodsForFutureDate(r).then(function(e){var r,t=jsDPZ.app.order.getOrder().isCarryoutOrder()?"Carryout":"Delivery";return(null===(r=e.intervals)||void 0===r?void 0:r.filter(function(e){return n(t,e)})).map(function(e){var r=e.startTime;return{disabled:!1,label:a(r),value:u(r)}})}).catch(function(){return[]})},getIsInsideDucHours:l,getAllowFutureDucOrder:function(){return i.getMarketProperty("order").allowFutureDucOrder&&killConfig.isMarketEnabled("61b28d53-5a6b-4d67-912f-06c1768f135a")},getSelectedFutureTime:function(e){var r=$(".js-future-time option:selected",0<arguments.length&&void 0!==e?e:null).val();if(!jsDPZ.util.empty(r)){var t=i.getMarketProperty("date").format,n=t.SERVER_TIME_POWER,o=t.FUTURE_ORDER_TIME;return dayjs(r,n).format(o)}},getAvailabilityInterval:function(r,e){return e.intervals.find(function(e){return e.startTime===r})},getServiceMethodTimings:function(e){var r=0<arguments.length&&void 0!==e?e:{},t=r.Min,n=void 0===t?0:t,o=r.Max,i=void 0===o?0:o;return{Min:n,Max:i,Avg:Math.round(parseFloat((n+i)/2))}},toggleVisibility:c,toggleVisibilityAll:function(e,r){var t=0<arguments.length&&void 0!==e?e:[],n=1<arguments.length&&void 0!==r?r:[];t.length===n.length&&t.forEach(function(e,r){return c(e,n[r])})},closeAll:function(e){(0<arguments.length&&void 0!==e?e:[]).forEach(function(e){return c(e,!1)})},openAll:function(e){(0<arguments.length&&void 0!==e?e:[]).forEach(function(e){return c(e,!0)})},renderFutureOrderAttentionPopup:d,renderFutureOrderAttentionPopupIfOutsideDucHour:function(e){var r=e.validateOrder,t=void 0!==r&&r,n=jsDPZ.app.order.getOrder().data.Details.OrderDateTime;l(n)||d({orderableDateTime:n,validateOrder:t})}}});