define("dpz.what3Words",["dpz.config","external/what3Words"],function(t,n){function i(){return killConfig.isMarketEnabled("3345eed3-80a4-46f1-b4af-b2b2f9c0e3c9")}function d(t){var n=0<arguments.length&&void 0!==t?t:{};return n.lat?{latitude:n.lat,longitude:n.lng}:n.Latitude?{latitude:+n.Latitude,longitude:+n.Longitude}:n}function a(t){var n=t.latitude,e=t.longitude;return"".concat(n,":").concat(e)}var u=n.loadAPI,r={},l={};return{areSameCoordinates:function(t,n){var e=d(t),o=e.latitude,r=e.longitude,i=d(n),a=i.latitude,u=i.longitude;return o===a&&r===u},convertToCoordinates:function(o){return new Promise(function(e){var t=r[o];i()?jsDPZ.util.empty(t)?u().then(function(){return window.what3words.api.convertToCoordinates(o)}).then(function(t){var n=t.coordinates;r[o]=d(n),e(r[o])}).catch(function(){return e(null)}):e(t):e(null)})},convertToWords:function(t){var r=d(t);return new Promise(function(e){if(i()&&function(t){var n=t.latitude,e=t.longitude;return n&&e}(r)){var t=l[a(r)];if(t)e(t);else{var n=r.latitude,o=r.longitude;u().then(function(){return window.what3words.api.convertTo3wa({lat:n,lng:o}).then(function(t){var n=t.words;l[a(r)]=n,e(n)})}).catch(function(){return e("")})}}else e("")})},isWhat3WordsEnabled:i,loadAPI:function(t){return i()?u(t):new Promise(function(t,n){return n("What3Words is disabled")})},what3WordsEvents:{SELECTED_SUGGESTION:"selected_suggestion",VALUE_CHANGED:"value_changed"}}});