function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ownKeys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}define("dpz.home",["site.funcs","dpz.abTesting","dpz.config","dpz.stjude"],function(a,e,G,R){var m,t,i=e.setTest,d={getValidDayjs:function(e,t){return e&&dayjs(e).isValid()?dayjs(e):dayjs(t)},getValidEndsAt:function(e){return this.getValidDayjs(e,"2999-12-31")},getValidStartsAt:function(e){return this.getValidDayjs(e,"1970-01-01")},isBetween:function(e,t,r){return a.func.isBetween(e,t,r)}},K={device:function(e){var t=site.func.isHandheld();return!e.device||"handheld"===e.device&&t||"desktop"===e.device&&!t},today:function(e){var t,r=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],n=site.func.getDateTime(),o=n.day(),a=n.hour(),i=n.minute(),s=n.second();if(!killConfig.isMarketEnabled("wamActive"))return 0<=(null===(t=e.days)||void 0===t?void 0:t.indexOf(o));if($.isEmptyObject(e.campaignHours))return!!e.days&&0<=e.days.indexOf(o);if(0<e.campaignHours[r[o]].length){var l="HH:mm:ss";return e.campaignHours[r[o]].some(function(e){var t=[a,i,s].join(":"),r=dayjs(t,l),n=dayjs(e.startTime,l),o=dayjs(e.endTime,l);return r.isAfter(n)&&r.isBefore(o)})}return!1},date:function(e){var t,r=d.getValidStartsAt(e.localStartsAt||e.startsAt),n=d.getValidEndsAt(e.localEndsAt||e.endsAt),o=d.isBetween(r,n);return o&&null!==(t=e.span)&&void 0!==t&&t.length?e.span.some(function(e){var t=parseInt(e.from.split(":").join("")),r=parseInt(e.to.split(":").join("")),n=parseInt(dayjs().format("HHmmss"));if(!G.getIsProduction()){var o=site.storage.load("testingHour");n=o?parseInt(o+"0000"):n}return r<t?t<=n&&n<24e4||0<=n&&n<=r:t<=n&&n<=r}):o},activeTimePeriods:function(e){var t=e.activeTimePeriods,r=void 0===t?[]:t;if(!r.length)return!0;function a(e){var t=_slicedToArray(e.split(":"),3),r=t[0],n=t[1],o=t[2];return site.func.getDateTime().set("hour",r).set("minutes",n).set("seconds",o)}var i=site.func.getDateTime();return r.some(function(e){var t=e.periodStart,r=e.periodEnd,n=a(t),o=a(r);return i.isSame(n)||i.isSame(o)||d.isBetween(n,o)})},killConfig:(t=function(e){var t,r,n=G.getMarketProperty(site.isHomepage?"home":"featuredCoupon").tiles;if(!(e.killConfig||null!==(t=n[e.tile])&&void 0!==t&&t.killConfig))return!0;function o(e){return killConfig.isMarketEnabled(e.key)===e.value}return[e.killConfig,null===(r=n[e.tile])||void 0===r?void 0:r.killConfig].every(function(e){return!e||(Array.isArray(e)?e.every(o):o(e))})},r.toString=function(){return t.toString()},r),loyalty:function(e,t,r){return!function(e,t,r){return e.some(function(e){return e[r]})}(r,0,"loyalty")||(!!e.killConfig||("ACTIVE"===jsDPZ.app.customer.getCustomer().data.Loyalty.AccountStatus?e.loyalty:!e.loyalty))},currentBreakpointExclusively:function(e,t,r){if(function(e){return e.some(function(e){return $.isArray(e.displayExclusivelyOn)?e.displayExclusivelyOn.length:e.displayExclusivelyOn})}(r)){if(e.displayExclusivelyOn){var n=site.func.getCurrentBreakpoint();return $.isArray(e.displayExclusivelyOn)?0<=e.displayExclusivelyOn.indexOf(n):e.displayExclusivelyOn===n}return!0}return!0},loyaltyCampaign:function(e){if(e.loyaltyCampaign){if(dpz.loyalty.loyaltyIsOk()&&dpz.loyalty.isEnrolled())switch(e.loyaltyCampaign){case"HighEngagement":var t=jsDPZ.app.customer.getCustomer().data.Session.highEngagementCampaignInfo;return"en"===dpz.market.activeLanguageCode&&t;case"DeliveryDoublePoints":return jsDPZ.app.customer.getCustomer().data.Session.isEligibleForDeliveryDoublePoints;default:return!1}return!1}return!0}};function r(e){return t.apply(this,arguments)}function g(o){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(o){var a={},i="anonymous"!==(2<arguments.length?arguments[2]:void 0),t=i&&killConfig.isMarketEnabled("wamActive"),s=!t,l=t;Array.isArray(e)||(e=[e]);function u(t){return!c||null==t||!t.excludedExperience||!c.some(function(e){return t.excludedExperience.includes(e)})}var c=e.filter(function(e){return(null==e?void 0:e.inTest)&&e.experience}).reduce(function(e,t){var r=t.experience;return[].concat(_toConsumableArray(e),[r])},[]);return Object.keys(o).forEach(function(e){var t,r=_objectSpread(_objectSpread({".block0":"defaultHeroTile",".block2":"defaultSidePanel2"},s&&{".block1":"defaultSidePanel1"}),l&&{".block2":"defaultSidePanel1",".block3":"defaultSidePanel2",".block10":"defaultHeroTile"});!killConfig.isMarketEnabled("v2018HomepageLayout")&&i&&delete r[".block0"];var n=o[e];if(0<n.length){if(n=n.filter(K.device).filter(K.today).filter(K.date).filter(K.activeTimePeriods).filter(K.killConfig).filter(K.loyaltyCampaign).filter(u),c.length){n=n.filter(function(e){var t=e.experience;if(t){function r(e){return c.includes(e)}return Array.isArray(t)?t.some(r):r(t)}return!0})}else{n=n.filter(function(e){return!e.experience})}n=n.filter(K.loyalty).filter(K.currentBreakpointExclusively),t=function(e){if(1===e.length)return e.pop();if(killConfig.isMarketEnabled("wamActive")?e.sort(function(e,t){return e.createDate<t.createDate?1:e.createDate>t.createDate?-1:0}):e.sort(function(e,t){return e.startsAt<t.startsAt?1:e.startsAt>t.startsAt?-1:0}),killConfig.isMarketEnabled("wamActive"))return e[0];var n,o=e[0];return e.forEach(function(e){var t=d.getValidStartsAt(e.localStartsAt||e.startsAt),r=d.getValidEndsAt(e.localEndsAt||e.endsAt).diff(t);r<(n=n||r)&&(n=r,o=e)}),o}(n)}t?a[e]=t:r[e]&&(a[e]={days:[0,1,2,3,4,5,6],tile:r[e]})}),a}return null}return{setTiles:function(e,f){var t,r=[site.func.loadWam()],n=$.Deferred(function(e){var t=e.resolve,r=jsDPZ.app.customer.getCustomer().data,n=r.Session,o=r.Email;n.LoggedInOnHomepage&&a.func.customerLoggedIn()?n.valueSiteOffer?t(n.valueSiteOffer.available):jsDPZ.ajax.getValueSiteOffer({email:o}).then(function(e){e&&(jsDPZ.app.customer.getCustomer().getSessionData().valueSiteOffer=e,site.sessionTools.save()),t(e&&e.available)}).catch(function(e){return t(!1)}):t(!1)});r.push(n),r.push(dpz.loyalty.shouldShowHighEngagementPromotionalModal()),r.push(dpz.loyalty.shouldShowHighEngagementWelcomeModal()),r.push($.Deferred(function(e){var t=e.resolve;return dpz.loyalty.fetchHEDeliveryDoublePoints().then(t,function(){return t()})})),r.push(site.func.getOffers("DPZ_ECOM-51405").then(i));var o=site.func.getOffers("DPZ_ECOM-67207").then(i);r.push(o),(t=$).when.apply(t,r).always(function(e,t,r,n,o){var a;if(!f){f={loggedin:"profiled",remembered:"profiled",anonymous:"anonymous"}[dpz.customer.getStatus()]}$(".block").empty();var i={".block0":[],".block1":[],".block2":[]};$.extend(i,G.getMarketProperty("home").tileBlocks[f]);for(var s=arguments.length,l=new Array(5<s?s-5:0),u=5;u<s;u++)l[u-5]=arguments[u];var c=g(i,l,f),d=l.find(function(e){return"DPZ_ECOM-51405"===(null==e?void 0:e.mboxName)}),p=Object.keys(c).map(function(e){return function(d,e,p,u){var t,r,n,o,f=$(d).data("image-type"),a=killConfig.isMarketEnabled("wamActive"),m=G.getMarketProperty(site.isHomepage?"home":"featuredCoupon").tiles[e.tile]||{},g=e.tile.match(/[A-Z]?[a-z]+|[0-9]+/g).join("-").toLowerCase(),i=m.tracking||{},s=i.group,l=i.panelName,c=i.panelNumber,y=i.subGroup,v=i.uri,b={group:void 0===s?"":s,panelName:void 0===l?"":l,panelNumber:void 0===c?"":c,subGroup:void 0===y?"":y,uri:void 0===v?"":v},h=function(e,t){switch(e.linkType){case"all_coupons":return"/pages/order/#!/section/Coupons/category/All/";case"breads":return"/pages/order/#!/section/Food/category/Bread/";case"deserts":return"/pages/order/#!/section/Food/category/Dessert/";case"drinks":return"/pages/order/#!/section/Food/category/AllDrinks/";case"extras":return"/pages/order/#!/section/Food/category/Sides/";case"national_menu":return"/pages/order/menu";case"pasta":return"/pages/order/#!/section/Food/category/Pasta/";case"profile":return"/pages/customer/#!/customer/profile/";case"sandwiches":return"/pages/order/#!/section/Food/category/Sandwich/";case"side":return"/pages/order/#!/section/Food/category/AllSides/";case"specialty_pizza":return"/pages/order/#!/section/Food/category/Pizza/";case"store_locator":return"/pages/order/#!/locations/search/";case"store_menu":return"/pages/order/#!/section/Food/category/AllEntrees/";case"tracker":return"/pages/tracker/#!/track/order/";case"wings":return"/pages/order/#!/section/Food/category/Wings/";case"coupon":var r=e.linkCode||e.couponCode;return"/pages/order/?couponCode_0=".concat(r,"&partnerCode=DOMINOS&so=hp&panelname=").concat(t.panelName,"&panelnumber=").concat(t.panelNumber);case"product":return"/pages/order/#!/product/".concat(e.linkCode,"/builder/");default:return e.href||e.linkCode||""}}(m,b),k=!h.match(/^([\w-]*:)?\/\//),C=m.textContent||{},A="footer"===m.type,_=m.btnClass,j=m.btnText,S=m.couponCode,D=void 0===S?"":S,T=m.customComponent,E=m.description,P=void 0===E?"":E,O=m.quid,w=void 0===O?"":O,x=m.target,z=m.tileClass,H=void 0===z?"":z,I=m.preactComponent,M=void 0===I?"":I,N="",F=!1;A||T||(N=(null===(t=m.images)||void 0===t?void 0:null===(r=t[f])||void 0===r?void 0:r.alt)||"",F=(null===(n=m.images)||void 0===n?void 0:null===(o=n[f])||void 0===o?void 0:o.renderButton)||!1);var L,V,B,Z=(B=f,site.func.isHandheld()&&(B+="Handheld"),V=~e.tile.indexOf("default")?urlConfig.assets:a?dpz.market.wamDirectory:dpz.market.directory,m.image?"".concat(V,"/images/promo/").concat(m.image):null!==(L=m.images)&&void 0!==L&&L[B]?"".concat(V,"/images/promo/").concat(m.images[B].src):""),W=[g,f,d.substring(1)].join("_"),q=d.replace(".",""),U={alt:N,btnClass:_,btnText:j,couponCode:D,customComponent:T,cssClass:["tile__".concat(g),m.cssClass].join(" ").trim(),description:P,dpzTrackEvtName:W,dpzTrackPosition:q,hasTextContent:!jsDPZ.util.empty(C)||T,href:h,image:Z,isFooterType:A&&!T,isWamTile:killConfig.isMarketEnabled("wamActive"),quid:w,renderButton:F,stJudePercentage:"",target:x,textContentDetails:function(e){if(Array.isArray(e)){return e.map(function(e){return e.str})}return[e]}(C.details),textContentFlag:C.flag,textContentIcon:C.icon,tileClass:H,tileName:g,trackingGroup:b.group,trackingPanelName:b.panelName,trackingPanelNumber:b.panelNumber,trackingSubGroup:b.subGroup,trackingUri:b.uri,useContext:k},Y={component:m.component||"globalHomePageTile",tokens:U};return $.Deferred(function(e){function t(){dpz.template.assembleLayout(Y).then(function(e){if($(d).html(e),$(d).removeClass("is-hidden"),$(document).trigger("render.tile",d),!window.isKiosk&&Y.tokens.hasTextContent?require(["shared.components","contexts.components","marketconfig/dpz.lang.tiles","marketconfig/dpz.lang.general"],function(e,t,r,n){var o=e.ConfigDrivenCoupon,a=e.TranslateContext,i=t.withGNOLOContext,s=document.querySelector("".concat(d," .js-configDrivenCoupon")),l=i(o),u={alt:Y.tokens.alt,type:f,url:[Y.tokens.image]};m.featuredCouponClass="",s?preact.render(preact.h(a.Provider,{value:dpz.template.getTranslateContextValue(_objectSpread(_objectSpread({},n),r))},preact.h(l,_extends({image:u,onMount:c,tileName:g,unencode:jsDPZ.util.htmlUnEncode,status:p,isDesktop:function(){return!site.func.isHandheld()}},m,{dpzTrackEvtName:U.dpzTrackEvtName,format:site.func.isHandheld()?"handheld":"standard"}))),s):c()}):c(),killConfig.isMarketEnabled("72b925fb-2e0b-4fce-be02-9063ae056e16")){var t=Y.tokens,r=t.tileName,n=t.dpzTrackEvtName,o=t.dpzTrackPosition,a=t.alt;dpz.utag.fire.link(null,{event_name:"Promotion Viewed",promotion_id:r,creative:n,name:a,position:o})}})}var c=e.resolve;M?require(["marketconfig/dpz.lang.general","marketconfig/dpz.lang.overlays","marketconfig/dpz.lang.tiles","shared.components"],function(e,t,r,n){var o,a=n.TranslateContext,i=n[M],s=n.DCDInactiveModal;m.showsDCDInactiveModal&&(o=function(){preact.render(preact.h(a.Provider,{value:dpz.template.getTranslateContextValue(_objectSpread(_objectSpread({},e),t))},preact.h(s,null)),document.body)});var l=document.querySelector(d);l&&(preact.render(preact.h(a.Provider,{value:dpz.template.getTranslateContextValue(_objectSpread(_objectSpread(_objectSpread({},e),t),r))},preact.h(i,_objectSpread(_objectSpread(_objectSpread({},m),{},{blockName:d,contextFixed:dpz.template.contextFixed,isHandheld:site.func.isHandheld,href:h,useContext:k,activeLanguageCode:dpz.market.activeLanguageCode,quid:w,marketDirectory:dpz.market.directory,promoFooter:document.querySelector(".js-home-touts__bottom").classList.contains("promos--footer"),storeSelected:Boolean(jsDPZ.app.order.getOrder().data.Details.StoreID),translateMoney:dpz.template.translateMoney,utag:dpz.utag,ecom51405:u},o&&{showDCDInactiveModal:o}),{},{isActiveTimePeriods:K.activeTimePeriods,urlConfig:urlConfig}))),l),"HighEngagement50TileMobile"===M&&l.classList.add("flex")),$(document).trigger("render.tile",d),c()}):m.component&&"stJudeThermometer"===m.component?R.getStats().then(function(e){Y.tokens.stJudePercentage=R.getPercentage(e),t()}):t()})}(e,c[e],f,d)});(a=$).when.apply(a,_toConsumableArray(p)).then(function(){1<$(".js-home-touts__bottom .block").filter(":not(:empty)").length?($(".js-home-touts__bottom").addClass("rotate"),$(".js-home-touts__bottom .block").hide(),m=site.func.initTileRotator(".js-home-touts__bottom .block:parent",!0)):(clearTimeout(m),$(".js-home-touts__bottom").removeClass("rotate"),$(".js-home-touts__bottom .block").hide().filter(":not(:empty)").first().show()),$(".js-home-touts__bottom").show(),$(".js-lateNightCOSWeekFooter").off("click").on("click",function(e){e.preventDefault(),dpz.utag.fire.link(e),window.location=$(e.currentTarget).find("a").attr("href")}),!$(".block4").is(":empty")&&c[".block4"]&&$(".block4").removeClass("promo--narrow is-hidden"),$(document).trigger("render.tiles",{ecom51405:d,shouldShowHighEngagementPromotionalModal:r,shouldShowHighEngagementWelcomeModal:n,fetchHEDeliveryDoublePoints:o,valueSiteEligible:t})})})},getBlockConfigs:g}});